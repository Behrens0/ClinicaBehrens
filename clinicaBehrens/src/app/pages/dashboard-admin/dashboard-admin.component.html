<div class="dashboard-container">
  <h1>Dashboard Administrador</h1>
  <p>Bienvenido al dashboard de administradores</p>
  
  <!-- Accesos RÃ¡pidos -->
  <div class="quick-access">
    <h2>Accesos RÃ¡pidos</h2>
    <div class="quick-access-grid">
      <button routerLink="/mis-turnos-administrador" class="quick-btn">
        <span class="icon">ğŸ“‹</span>
        <span class="text">Todos los Turnos</span>
      </button>
      <button routerLink="/turnos" class="quick-btn">
        <span class="icon">ğŸ“…</span>
        <span class="text">Solicitar Turno</span>
      </button>
      <button routerLink="/registro" class="quick-btn">
        <span class="icon">â•</span>
        <span class="text">Registrar Usuario</span>
      </button>
      <button routerLink="/historias-clinicas-admin" class="quick-btn">
        <span class="icon">ğŸ“„</span>
        <span class="text">Historias ClÃ­nicas</span>
      </button>
      <button routerLink="/mi-perfil" class="quick-btn">
        <span class="icon">ğŸ‘¤</span>
        <span class="text">Mi Perfil</span>
      </button>
    </div>
  </div>

  <div class="admin-actions">
    <div class="action-description">
      <p>Desde aquÃ­ puedes:</p>
      <ul>
        <li>Ver y gestionar todos los turnos de la clÃ­nica</li>
        <li>Solicitar turnos para pacientes</li>
        <li>Registrar nuevos pacientes, especialistas y administradores</li>
        <li>Aprobar o rechazar especialistas pendientes</li>
        <li>Habilitar o inhabilitar acceso de especialistas</li>
      </ul>
    </div>
  </div>

  <!-- Especialistas Pendientes -->
  <div class="section-pendientes" *ngIf="especialistasPendientes.length > 0">
    <h2>Especialistas Pendientes de AprobaciÃ³n</h2>
    <div class="pendientes-grid">
      <div *ngFor="let esp of especialistasPendientes" class="pendiente-card">
        <div class="pendiente-header">
          <div class="pendiente-avatar">
            <img *ngIf="esp.imagen_perfil" [src]="esp.imagen_perfil" [alt]="esp.nombre + ' ' + esp.apellido" />
            <div *ngIf="!esp.imagen_perfil" class="avatar-placeholder">
              {{ esp.nombre.charAt(0) }}{{ esp.apellido.charAt(0) }}
            </div>
          </div>
          <div class="pendiente-info">
            <h3>{{ esp.nombre }} {{ esp.apellido }}</h3>
            <p><strong>DNI:</strong> {{ esp.dni }}</p>
            <p><strong>Especialidad:</strong> {{ esp.especialidad }}</p>
            <p><strong>Email:</strong> {{ esp.email }}</p>
            <p><strong>Edad:</strong> {{ esp.edad }}</p>
          </div>
        </div>
        <div class="pendiente-actions">
          <button (click)="aprobarEspecialista(esp)" class="btn-aprobar">
            âœ“ Aprobar
          </button>
          <button (click)="rechazarEspecialista(esp)" class="btn-rechazar">
            âœ• Rechazar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Listado de Usuarios -->
  <div class="section-usuarios">
    <div class="usuarios-header">
      <h2>Usuarios del Sistema</h2>
      <button (click)="descargarExcelUsuarios()" class="btn-excel">
        ğŸ“Š Descargar Excel
      </button>
    </div>
    <div class="usuarios-stats">
      <div class="stat-card">
        <h3>{{ getUsuariosPorTipo('paciente').length }}</h3>
        <p>Pacientes</p>
      </div>
      <div class="stat-card">
        <h3>{{ getUsuariosPorTipo('especialista').length }}</h3>
        <p>Especialistas</p>
      </div>
      <div class="stat-card">
        <h3>{{ getUsuariosPorTipo('administrador').length }}</h3>
        <p>Administradores</p>
      </div>
    </div>

    <div class="usuarios-table">
      <table>
        <thead>
          <tr>
            <th>Foto</th>
            <th>Tipo</th>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>DNI</th>
            <th>Email</th>
            <th>Especialidad</th>
            <th>Obra Social</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let usuario of usuarios">
            <td>
              <div class="user-avatar">
                <img *ngIf="usuario.imagen_perfil" 
                     [src]="usuario.imagen_perfil" 
                     [alt]="usuario.nombre + ' ' + usuario.apellido" />
                <div *ngIf="!usuario.imagen_perfil" class="avatar-placeholder">
                  {{ usuario.nombre.charAt(0) }}{{ usuario.apellido.charAt(0) }}
                </div>
              </div>
            </td>
            <td>
              <span class="badge" [class]="'badge-' + usuario.tipo">
                {{ usuario.tipo }}
              </span>
            </td>
            <td>{{ usuario.nombre }}</td>
            <td>{{ usuario.apellido }}</td>
            <td>{{ usuario.dni }}</td>
            <td>{{ usuario.email }}</td>
            <td>{{ usuario.especialidad || '-' }}</td>
            <td>{{ usuario.obra_social || '-' }}</td>
            <td>
              <span *ngIf="usuario.tipo === 'especialista'" 
                    [class]="getEstadoEspecialista(usuario)">
                {{ getEstadoEspecialistaTexto(usuario) }}
              </span>
              <span *ngIf="usuario.tipo !== 'especialista'">-</span>
            </td>
            <td>
              <div class="action-buttons" *ngIf="usuario.tipo === 'especialista'">
                <button 
                  *ngIf="usuario.aprobado && !usuario.rechazado"
                  (click)="inhabilitarEspecialista(usuario)" 
                  class="btn-inhabilitar"
                  title="Inhabilitar acceso al sistema">
                  ğŸš« Inhabilitar
                </button>
                <button 
                  *ngIf="!usuario.aprobado && !usuario.rechazado"
                  (click)="habilitarEspecialista(usuario)" 
                  class="btn-habilitar"
                  title="Habilitar acceso al sistema">
                  âœ… Habilitar
                </button>
                <button 
                  *ngIf="usuario.rechazado"
                  (click)="habilitarEspecialista(usuario)" 
                  class="btn-habilitar"
                  title="Reactivar especialista">
                  â™»ï¸ Reactivar
                </button>
              </div>
              <span *ngIf="usuario.tipo !== 'especialista'">-</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
