<div class="dashboard-container fade-in" *ngIf="!isLoading">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-info">
      <h1>Bienvenido/a, {{ paciente?.nombre }} {{ paciente?.apellido }}</h1>
      <p class="obra-social">Obra Social: {{ paciente?.obra_social || 'Sin obra social' }}</p>
    </div>
    <div class="header-avatar" *ngIf="paciente?.imagen_perfil">
      <img [src]="paciente.imagen_perfil" [alt]="paciente.nombre">
    </div>
  </div>

  <!-- PrÃ³ximo Turno Destacado -->
  <div class="proximo-turno-destacado" *ngIf="estadisticas.proximoTurno">
    <div class="turno-destacado-header">
      <h2>ğŸ—“ï¸ Tu PrÃ³ximo Turno</h2>
    </div>
    <div class="turno-destacado-content">
      <div class="turno-fecha-grande">
        <p class="fecha">{{ formatearFecha(estadisticas.proximoTurno.fecha) }}</p>
      </div>
      <div class="turno-detalles">
        <p><strong>Especialista:</strong> {{ estadisticas.proximoTurno.especialistaNombre }}</p>
        <p><strong>Especialidad:</strong> {{ estadisticas.proximoTurno.especialidad }}</p>
        <span [class]="getEstadoClass(estadisticas.proximoTurno.estado)" class="estado-badge">
          {{ getEstadoTexto(estadisticas.proximoTurno.estado) }}
        </span>
      </div>
    </div>
  </div>

  <!-- EstadÃ­sticas -->
  <div class="estadisticas-grid fade-in-delay-1">
    <div class="stat-card pendientes">
      <div class="stat-icon">â³</div>
      <div class="stat-info">
        <h3>{{ estadisticas.turnosPendientes }}</h3>
        <p>Turnos Activos</p>
      </div>
    </div>

    <div class="stat-card realizados">
      <div class="stat-icon">âœ…</div>
      <div class="stat-info">
        <h3>{{ estadisticas.turnosRealizados }}</h3>
        <p>Turnos Realizados</p>
      </div>
    </div>

    <div class="stat-card cancelados">
      <div class="stat-icon">âŒ</div>
      <div class="stat-info">
        <h3>{{ estadisticas.turnosCancelados }}</h3>
        <p>Turnos Cancelados</p>
      </div>
    </div>
  </div>

  <!-- Acciones RÃ¡pidas -->
  <div class="acciones-rapidas slide-in-right">
    <h2>Â¿QuÃ© deseas hacer?</h2>
    <div class="acciones-grid">
      <button class="accion-card primary" 
              (click)="irASolicitarTurno()"
              appEfectoHover 
              escalaHover="1.03" 
              colorHover="#3498db"
              appTooltip="Solicita un turno con el especialista que necesites"
              tooltipPosition="top">
        <div class="accion-icon">ğŸ“…</div>
        <h3 appResaltar="#e3f2fd">Solicitar Turno</h3>
        <p>Agenda una nueva consulta mÃ©dica</p>
      </button>

      <button class="accion-card" 
              (click)="irAMisTurnos()"
              appEfectoHover 
              escalaHover="1.03" 
              colorHover="#2ecc71"
              appTooltip="Ve todos tus turnos: pendientes, finalizados y cancelados"
              tooltipPosition="top">
        <div class="accion-icon">ğŸ“‹</div>
        <h3>Mis Turnos</h3>
        <p>Gestiona tus turnos pendientes y pasados</p>
      </button>

      <button class="accion-card" 
              (click)="irAMiPerfil()"
              appEfectoHover 
              escalaHover="1.03" 
              colorHover="#9b59b6"
              appTooltip="Consulta tu historia clÃ­nica y actualiza tus datos"
              tooltipPosition="top">
        <div class="accion-icon">ğŸ‘¤</div>
        <h3>Mi Perfil</h3>
        <p appResaltar="#f3e5f5">Ver historia clÃ­nica y datos personales</p>
      </button>
    </div>
  </div>

  <!-- Lista de PrÃ³ximos Turnos -->
  <div class="lista-turnos zoom-in-delay" *ngIf="proximosTurnos.length > 0">
    <h2>Todos tus Turnos Activos</h2>
    <div class="turnos-list">
      <div class="turno-item" *ngFor="let turno of proximosTurnos">
        <div class="turno-fecha">
          <div class="fecha-icon">ğŸ“…</div>
          <p>{{ formatearFecha(turno.fecha) }}</p>
        </div>
        <div class="turno-info">
          <h3>{{ turno.especialidad }}</h3>
          <p>Dr./Dra. {{ turno.especialistanombre }}</p>
        </div>
        <span [class]="getEstadoClass(turno.estado)" class="estado-badge">
          {{ getEstadoTexto(turno.estado) }}
        </span>
      </div>
    </div>
    <button class="btn-ver-todos" (click)="irAMisTurnos()">
      Ver Todos los Turnos â†’
    </button>
  </div>

  <!-- Sin Turnos -->
  <div class="sin-turnos" *ngIf="proximosTurnos.length === 0 && !estadisticas.proximoTurno">
    <div class="sin-turnos-icon">ğŸ“­</div>
    <h3>No tienes turnos programados</h3>
    <p>Solicita tu primera consulta mÃ©dica</p>
    <button class="btn-solicitar" (click)="irASolicitarTurno()">
      Solicitar Turno
    </button>
  </div>
</div>

<!-- Loading -->
<div class="loading-container" *ngIf="isLoading">
  <div class="spinner"></div>
  <p>Cargando dashboard...</p>
</div>

